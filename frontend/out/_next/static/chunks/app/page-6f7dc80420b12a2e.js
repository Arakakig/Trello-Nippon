(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1580:function(e,t,o){Promise.resolve().then(o.bind(o,6039))},6039:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return n}});var a=o(7437),r=o(2265),s=o(4033),c=o(8958);function n(){let e=(0,s.useRouter)(),{isAuthenticated:t,loadUser:o}=(0,c.t)();return(0,r.useEffect)(()=>{o()},[o]),(0,r.useEffect)(()=>{t?e.push("/dashboard"):e.push("/login")},[t,e]),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}},8222:function(e,t,o){"use strict";o.d(t,{HF:function(){return u},iJ:function(){return c},lC:function(){return l},qx:function(){return n}});var a=o(4829);let r="https://trello-nippon.onrender.com/",s=a.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});let c={register:e=>s.post("/auth/register",e),login:e=>s.post("/auth/login",e),getMe:()=>s.get("/auth/me"),getUsers:()=>s.get("/auth/users"),getUserByEmail:e=>s.get("/auth/users/by-email/".concat(e)),verifyEmail:e=>s.get("/auth/verify-email?token=".concat(e)),resendVerification:()=>s.post("/auth/resend-verification")},n={getAll:e=>s.get("/projects",{params:{includeArchived:e}}),getById:e=>s.get("/projects/".concat(e)),create:e=>s.post("/projects",e),update:(e,t)=>s.put("/projects/".concat(e),t),delete:e=>s.delete("/projects/".concat(e)),addMember:(e,t,o)=>s.post("/projects/".concat(e,"/members"),{userId:t,role:o}),removeMember:(e,t)=>s.delete("/projects/".concat(e,"/members/").concat(t)),updateMemberRole:(e,t,o)=>s.put("/projects/".concat(e,"/members/").concat(t),{role:o}),createDefault:()=>s.post("/projects/create-default")},l={getAll:e=>s.get("/tasks",{params:{projectId:e}}),getById:e=>s.get("/tasks/".concat(e)),create:e=>s.post("/tasks",e),update:(e,t)=>s.put("/tasks/".concat(e),t),delete:e=>s.delete("/tasks/".concat(e)),reorder:e=>s.post("/tasks/reorder",{tasks:e}),uploadAttachment:(e,t)=>{let o=new FormData;return o.append("file",t),s.post("/tasks/".concat(e,"/attachments"),o,{headers:{"Content-Type":"multipart/form-data"}})},deleteAttachment:(e,t)=>s.delete("/tasks/".concat(e,"/attachments/").concat(t)),downloadAttachment:(e,t)=>"".concat(r,"/tasks/").concat(e,"/attachments/").concat(t,"/download")},u={getByTask:e=>s.get("/comments/task/".concat(e)),create:e=>s.post("/comments",e),update:(e,t)=>s.put("/comments/".concat(e),t),delete:e=>s.delete("/comments/".concat(e))}},8958:function(e,t,o){"use strict";o.d(t,{t:function(){return c}});var a=o(4660),r=o(8222),s=o(5925);let c=(0,a.Ue)(e=>({user:null,token:null,isAuthenticated:!1,login:async(t,o)=>{try{let{token:a,user:c}=(await r.iJ.login({email:t,password:o})).data;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(c)),e({user:c,token:a,isAuthenticated:!0}),s.default.success("Login realizado com sucesso!")}catch(t){var a,c;let e=(null===(c=t.response)||void 0===c?void 0:null===(a=c.data)||void 0===a?void 0:a.message)||"Erro ao fazer login";throw s.default.error(e),t}},register:async(t,o,a)=>{try{let{token:c,user:n}=(await r.iJ.register({name:t,email:o,password:a})).data;localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(n)),e({user:n,token:c,isAuthenticated:!0}),s.default.success("Conta criada com sucesso!")}catch(t){var c,n;let e=(null===(n=t.response)||void 0===n?void 0:null===(c=n.data)||void 0===c?void 0:c.message)||"Erro ao criar conta";throw s.default.error(e),t}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e({user:null,token:null,isAuthenticated:!1}),s.default.success("Logout realizado com sucesso!")},loadUser:async()=>{let t=localStorage.getItem("token"),o=localStorage.getItem("user");if(t&&o)try{let a=JSON.parse(o);e({user:a,token:t,isAuthenticated:!0})}catch(e){console.error("Erro ao carregar usu\xe1rio:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}}))}},function(e){e.O(0,[600,810,971,938,744],function(){return e(e.s=1580)}),_N_E=e.O()}]);