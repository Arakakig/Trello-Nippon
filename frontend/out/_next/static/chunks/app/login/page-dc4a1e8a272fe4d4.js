(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4273:function(e,t,r){Promise.resolve().then(r.bind(r,378))},378:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(7437),o=r(2265),s=r(4033),n=r(8958),l=r(8222),c=r(1396),i=r.n(c),d=r(9732),u=r(5925);function m(){let e=(0,s.useRouter)(),{login:t,isAuthenticated:r,user:c}=(0,n.t)(),[m,p]=(0,o.useState)(""),[h,f]=(0,o.useState)(""),[g,x]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1);(0,o.useEffect)(()=>{r&&e.push("/dashboard")},[r,e]);let j=async r=>{r.preventDefault(),x(!0),y(!1);try{await t(m,h),c&&!c.emailVerified&&y(!0),e.push("/dashboard")}catch(e){console.error("Login error:",e)}finally{x(!1)}},b=async()=>{try{await l.iJ.resendVerification(),u.default.success("Email de verifica\xe7\xe3o reenviado!")}catch(e){u.default.error("Erro ao reenviar email")}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Trello Nippon"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Fa\xe7a login para continuar"})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[v&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Email n\xe3o verificado"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-yellow-700",children:"Verifique seu email para ativar todas as funcionalidades."}),(0,a.jsx)("button",{type:"button",onClick:b,className:"mt-2 text-sm font-medium text-yellow-800 underline hover:text-yellow-900",children:"Reenviar email de verifica\xe7\xe3o"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",required:!0,value:m,onChange:e=>p(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"seu@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),(0,a.jsx)(d.Z,{id:"password",value:h,onChange:e=>f(e.target.value),required:!0,autoComplete:"current-password"})]}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Entrando...":"Entrar"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["N\xe3o tem uma conta?"," ",(0,a.jsx)(i(),{href:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Registre-se"})]})})]})})}},9732:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7437),o=r(2265);function s(e){let{id:t,value:r,onChange:s,placeholder:n="••••••••",required:l=!1,autoComplete:c="current-password"}=e,[i,d]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:t,type:i?"text":"password",required:l,value:r,onChange:s,autoComplete:c,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:n}),(0,a.jsx)("button",{type:"button",onClick:()=>d(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",tabIndex:-1,children:i?(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})}},8222:function(e,t,r){"use strict";r.d(t,{HF:function(){return i},iJ:function(){return n},lC:function(){return c},qx:function(){return l}});var a=r(4829);let o="http://localhost:5000/api",s=a.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)}),t.ZP=s;let n={register:e=>s.post("/auth/register",e),login:e=>s.post("/auth/login",e),getMe:()=>s.get("/auth/me"),getUsers:()=>s.get("/auth/users"),getUserByEmail:e=>s.get("/auth/users/by-email/".concat(e)),verifyEmail:e=>s.get("/auth/verify-email?token=".concat(e)),resendVerification:()=>s.post("/auth/resend-verification")},l={getAll:e=>s.get("/projects",{params:{includeArchived:e}}),getById:e=>s.get("/projects/".concat(e)),create:e=>s.post("/projects",e),update:(e,t)=>s.put("/projects/".concat(e),t),delete:e=>s.delete("/projects/".concat(e)),addMember:(e,t,r)=>s.post("/projects/".concat(e,"/members"),{userId:t,role:r}),removeMember:(e,t)=>s.delete("/projects/".concat(e,"/members/").concat(t)),updateMemberRole:(e,t,r)=>s.put("/projects/".concat(e,"/members/").concat(t),{role:r}),createDefault:()=>s.post("/projects/create-default")},c={getAll:e=>s.get("/tasks",{params:{projectId:e}}),getById:e=>s.get("/tasks/".concat(e)),create:e=>s.post("/tasks",e),update:(e,t)=>s.put("/tasks/".concat(e),t),delete:e=>s.delete("/tasks/".concat(e)),reorder:e=>s.post("/tasks/reorder",{tasks:e}),uploadAttachment:(e,t)=>{let r=new FormData;return r.append("file",t),s.post("/tasks/".concat(e,"/attachments"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteAttachment:(e,t)=>s.delete("/tasks/".concat(e,"/attachments/").concat(t)),downloadAttachment:(e,t)=>"".concat(o,"/tasks/").concat(e,"/attachments/").concat(t,"/download")},i={getByTask:e=>s.get("/comments/task/".concat(e)),create:e=>s.post("/comments",e),update:(e,t)=>s.put("/comments/".concat(e),t),delete:e=>s.delete("/comments/".concat(e))}},8958:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var a=r(4660),o=r(8222),s=r(5925);let n=(0,a.Ue)(e=>({user:null,token:null,isAuthenticated:!1,login:async(t,r)=>{try{let{token:a,user:n}=(await o.iJ.login({email:t,password:r})).data;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(n)),e({user:n,token:a,isAuthenticated:!0}),s.default.success("Login realizado com sucesso!")}catch(t){var a,n;let e=(null===(n=t.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Erro ao fazer login";throw s.default.error(e),t}},register:async(t,r,a)=>{try{let{token:n,user:l}=(await o.iJ.register({name:t,email:r,password:a})).data;localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(l)),e({user:l,token:n,isAuthenticated:!0}),s.default.success("Conta criada com sucesso!")}catch(t){var n,l;let e=(null===(l=t.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)||"Erro ao criar conta";throw s.default.error(e),t}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e({user:null,token:null,isAuthenticated:!1}),s.default.success("Logout realizado com sucesso!")},loadUser:async()=>{let t=localStorage.getItem("token"),r=localStorage.getItem("user");if(t&&r)try{let a=JSON.parse(r);e({user:a,token:t,isAuthenticated:!0})}catch(e){console.error("Erro ao carregar usu\xe1rio:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}}))}},function(e){e.O(0,[600,810,396,971,938,744],function(){return e(e.s=4273)}),_N_E=e.O()}]);